<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>eCharts</title>
<script src="https://cdn.jsdelivr.net/npm/echarts@5.4.1/dist/echarts.min.js"></script>
</head>
<body>
<!-- Prepare a DOM with a defined width and height for ECharts -->
<div id="main" style="width: 900px;height:600px;"></div>
<script type="text/javascript">

    // Initialise the echarts instance based on the prepared div
    let myChart = echarts.init(document.getElementById('main'));

    fetch('https://fakestoreapi.com/products')
.then((response) => response.json())
.then((json) => {
// console.log(json)

let countCategory={};
json.forEach((product)=>{
    countCategory[product.category]=(countCategory[product.category]||0)+1;
})

// Prepare the data for the chart
let categories=Object.keys(countCategory);
let count=Object.values(countCategory);


// Specify the configuration items and data for the chart
let options = {
title: { 
    text: 'Fake Store Categories' 
},
xAxis: {
    type: 'category',
    data:categories,
},
yAxis: {
    type: 'value',
    name: 'Number of Products'
},
series: [{
name: '# products',
type: 'bar',
data: count
}]
};


// Display the chart
myChart.setOption(options);
})
.catch((error)=>{
    console.error('Error fetching data:', error);
});


</script>
</body>
</html>